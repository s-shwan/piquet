// ... inside the PiquetGame class ...

            updateUI() {
                const p1 = this.players[0];
                const p2 = this.players[1];
                document.getElementById('scores').innerText = `${p1.name}: ${p1.score} | ${p2.name}: ${p2.score}`;
                
                // Determine active player for hand display and actions
                let activePlayer;
                if (this.isTwoPlayer) {
                    activePlayer = this.players[this.currentPlayerIndex];
                } else {
                    // In 1P mode, the HAND DISPLAY should always be P1's hand.
                    activePlayer = p1; 
                }
                
                let playerToDisplayHand = p1; // Always show P1's hand
                let isP1ActiveHand = activePlayer === p1;

                // --- Start Screen Logic ---
                if (this.phase === 'start') {
                    // ... (rest of start screen logic remains the same)
                    // ...
                    return;
                }

                // Hide start buttons once game begins
                document.getElementById('start-1p-btn').style.display = 'none';
                document.getElementById('start-2p-btn').style.display = 'none';

                // --- Ecarte/Trick Controls Visibility (remains the same) ---
                // ...
                // ...

                document.getElementById('current-player').innerText = `${activePlayer.name}'s turn (${this.phase})${this.isTwoPlayer && this.phase === 'ecarte' ? ' - Discard Phase' : ''}`;
                
                let handDiv = document.getElementById('hand-display');
                handDiv.innerHTML = '';
                
                // --- Display and Interaction Logic ---
                // Always display P1's hand in 1P mode, display active player's hand in 2P mode.
                if (this.isTwoPlayer || playerToDisplayHand === p1) {
                    let player = this.isTwoPlayer ? activePlayer : p1; // P1 is the player for display in 1P mode
                    
                    // Determine if the *displayed* hand is the one that can act.
                    const canAct = (this.isTwoPlayer && isP1ActiveHand) || (!this.isTwoPlayer); 

                    let legalCards = this.phase === 'tricks' ? player.getLegalCards(this.ledSuit) : player.hand;
                    
                    player.hand.forEach((card, idx) => {
                        let cardDiv = this.createCardDiv(card);
                        
                        if (this.phase === 'ecarte' && canAct) {
                            // Only Player 1 handles discards in 1P mode, P2 is auto
                            cardDiv.onclick = () => this.selectDiscard(player, cardDiv, card);
                            if (playerDiscardsIncludes(player.discards, card)) cardDiv.classList.add('selected');
                        } else if (this.phase === 'tricks') {
                            if (!this.isTwoPlayer && this.leader === 1) {
                                // If 1P mode and AI leads, disable P1's cards
                                cardDiv.classList.add('disabled');
                                cardDiv.onclick = null;
                            } else if (legalCards.includes(card) && (this.isTwoPlayer ? isP1ActiveHand : true)) {
                                // P1's turn to play (1P mode) OR P1's turn to play (2P mode)
                                cardDiv.onclick = () => this.playCard(player.index, idx);
                            } else {
                                cardDiv.classList.add('disabled');
                                cardDiv.onclick = null;
                            }
                        } else {
                            // Disable if P2's turn in 2P discard phase
                            cardDiv.classList.add('disabled');
                            cardDiv.onclick = null;
                        }
                        handDiv.appendChild(cardDiv);
                    });
                }
                
                // ... (rest of updateUI logic remains the same, updating trick area etc.)
                // ...
            }
// ...
